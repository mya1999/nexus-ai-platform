# تصميم واجهة المحادثة العصبية (ZORO AI)

## الأهداف الرئيسية

- تقليل الحمل المعرفي عبر واجهة مركّزة وبسيطة.
- دعم تكيّف عصبي (Neuro-adaptive) عبر إعدادات: تقليل الحركة، حجم الخط، الكثافة.
- قابلية وصول عالية (لوحة مفاتيح، ARIA، تباين، تصنيف دلالي).
- بنية هندسية منفصلة تسهّل الإضافة (Toolbar, StatusBar, InputArea, ModelSelector, SettingsModal).

## البنية المعمارية

- `ConversationToolbar`: شعار / عودة / فتح الإعدادات / محادثة جديدة / اختيار نموذج (اختياري).
- `MessageList`: مسؤول عن عرض الرسائل فقط (إمكان استبداله لاحقاً بـ virtual scroll).
- `SystemStatusBar`: يعرض معرف النموذج وعدّ الرسائل وزمن الاستجابة.
- `InputArea`: إدخال المستخدم + إمكانية توسيع مستقبلية للأوامر.
- `ModelSelector`: تم نقله قرب حقل الإدخال لخفض مسافة الانتباه البصري.
- `SettingsModal`: مركز التحكم في التخصيص العصبي.

## مبادئ نفسية مستخدمة

- تقليل الحيرة عبر إزالة اللوحات الترحيبية والاقتراحات أثناء التركيز.
- وضع العناصر الحيوية (الإدخال + اختيار النموذج) في منطقة بصرية واحدة (Foveal Zone).
- تباعد محسوب بعرض مريح افتراضياً مع خيار التحويل إلى كثافة مكدّسة.
- تدرجات لونية محدودة لتقليل التشتت واستخدام النيون بشكل خافت حول النقاط المحورية.

## خصائص التخصيص العصبي

- Reduce Motion: يعطل أو يقلل تأثيرات الحركة (مستقبلًا يمكن إضافة class لإيقاف Sessions الحركة أو تقليل مدة الانتقالات).
- Font Scale: نطاق (0.85 - 1.50) يسمح بمواءمة حجم النص مع احتياجات الإدراك أو إجهاد العين.
- Density: وضعان (مريح / مكدّس) لتغيير الهوامش العمودية بين الرسائل والعناصر.

## تحسينات الوصول

- استخدام `fieldset + legend` للمجموعات (اختيار النموذج، اختيار الكثافة).
- أزرار ذات ring واضح عند التركيز بلوحة المفاتيح (`focus-visible`).
- استخدام `aria-label` و `aria-checked` و `role="switch"` حيث يلزم.
- طبقات خلفية ذات تباين كافٍ فوق خامات داكنة + حدود شفافة لتمييز الطبقات.

## قابلية التطوير

- يمكن إضافة طبقة `useReducedMotion()` لربط إعداد المخزن بحذف أو تعديل خصائص الحركة.
- استبدال `MessageList` بمكوّن افتراضي (virtualized) مثل react-virtual لاحقاً بدون تغيير بقية الهيكل.
- إضافة مخزن فرعي لتسجيل المقاييس (latency، معدل الأخطاء) وتغذية `SystemStatusBar` مباشرة.

## اعتبارات الأداء

- الحركة حالياً مدروسة وبعدد قليل من العناصر المتحركة (orbs + subtle grid) لتقليل ضغط الـ GPU.
- تفادي الحسابات العشوائية المتكررة داخل الرندر (موجودة في الصفحة الرئيسية ويمكن تحسينها).

## خطوات مستقبلية مقترحة

1. ربط Reduce Motion بإضافة class توقف keyframes أو تمرير `reducedMotion` إلى مكوّنات الحركة.
2. إضافة اختصارات لوحة مفاتيح (إرسال: Ctrl+Enter، فتح الإعدادات: Alt+S، محادثة جديدة: Alt+N).
3. دعم تمييز رسائل مهمة (وسم، تثبيت، تصفية سريعة).
4. إضافة تلميحات أو Quick Commands فوق حقل الإدخال (لم تُنفَّذ بعد ضمن القائمة TODO رقم 5).
5. تحسين الصفحة الرئيسية لإزالة الأنماط inline لصالح كُتل CSS منظمة.

## التمركز الهندسي البصري (Optical Center)

- **المبدأ**: وضع الشعار عند 54% من أعلى الشاشة (بدلاً من 50%) لتعويض ثقل الشريط العلوي والحصول على توازن بصري أفضل.
- **التطبيق**: استخدام `position: absolute` مع `top: 54%` و `transform: translate` لتمركز دقيق مستقل عن ارتفاع المحتوى.
- **النظام الهندسي**:
  - **Baseline**: 8px (0.5rem) - جميع الأبعاد من مضاعفاته.
  - **Major Grid**: 64px (8 وحدات) للعناصر الكبرى.
  - **ارتفاعات موحدة**: Toolbar=80px, Input=56px, Status=32px, ModelSelector=64px.
  - **متغيرات CSS**: `--spacing-unit`, `--toolbar-height`, `--optical-center` لسهولة التعديل.
- **أدوات التطوير** (اختيارية):
  - `.debug-grid` على body: شبكة 64px + baseline 8px.
  - `.debug-center` على body: صليب تقاطع في المركز البصري.
- **Golden Ratio**: الشعار 64×64px (نسبة 1:1) مع هوامش محسوبة وفق النسبة الذهبية (mb-8 = 32px ≈ 64/φ).

## حالة التنفيذ الحالية

- التخصيص العصبي مفعّل (مخزن + واجهة الإعدادات).
- الوصول الأساسي مغطّى (تبويبات، مفاتيح، حقول اختيار، تباين).
- واجهة المحادثة بسيطة ومركزّة وتلتزم بتوجيهاتك (شعار + عنوان + إدخال + مُحدد نموذج مدمج).
- **التمركز الهندسي**: مطبّق بدقة optical center (54%) مع نظام وحدات 8px وأدوات قياس.

---

تم إعداد هذه الوثيقة لدعم الاستمرار في التطوير بسرعة مع الحفاظ على الرؤية التصميمية العصبية.
